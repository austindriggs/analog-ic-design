Version 4.1
SHEET 1 1924 3120
WIRE 112 48 112 16
WIRE 112 48 48 48
WIRE 320 48 320 16
WIRE 384 48 320 48
WIRE 592 48 592 16
WIRE 592 48 528 48
WIRE 800 48 800 16
WIRE 864 48 800 48
WIRE -112 80 -112 48
WIRE 48 96 48 48
WIRE 112 96 48 96
WIRE 256 96 176 96
WIRE 384 96 384 48
WIRE 384 96 320 96
WIRE 528 96 528 48
WIRE 592 96 528 96
WIRE 736 96 656 96
WIRE 864 96 864 48
WIRE 864 96 800 96
WIRE 112 160 112 144
WIRE 176 160 176 96
WIRE 176 160 112 160
WIRE 592 160 592 144
WIRE 656 160 656 96
WIRE 656 160 592 160
WIRE -112 176 -112 160
WIRE 112 176 112 160
WIRE 320 176 320 144
WIRE 368 176 320 176
WIRE 592 176 592 160
WIRE 800 176 800 144
WIRE 848 176 800 176
WIRE 320 192 320 176
WIRE 800 192 800 176
WIRE 432 240 320 240
WIRE 912 240 800 240
WIRE 432 288 432 240
WIRE 432 288 320 288
WIRE 912 288 912 240
WIRE 912 288 800 288
WIRE 112 304 112 256
WIRE 320 304 320 288
WIRE 592 304 592 256
WIRE 800 304 800 288
WIRE -112 352 -112 336
WIRE 544 544 544 512
WIRE 544 544 480 544
WIRE 752 544 752 512
WIRE 816 544 752 544
WIRE 64 576 64 544
WIRE 480 592 480 544
WIRE 544 592 480 592
WIRE 688 592 608 592
WIRE 816 592 816 544
WIRE 816 592 752 592
WIRE 544 656 544 640
WIRE 608 656 608 592
WIRE 608 656 544 656
WIRE 64 672 64 656
WIRE 144 672 64 672
WIRE 544 672 544 656
WIRE 752 672 752 640
WIRE 800 672 752 672
WIRE 752 688 752 672
WIRE 0 720 -80 720
WIRE 96 720 64 720
WIRE -80 736 -80 720
WIRE 864 736 752 736
WIRE 96 768 96 720
WIRE 64 784 64 768
WIRE 64 784 96 768
WIRE 864 784 864 736
WIRE 864 784 752 784
WIRE 544 800 544 752
WIRE 752 800 752 784
WIRE 544 1328 544 1296
WIRE 544 1328 480 1328
WIRE 752 1328 752 1296
WIRE 816 1328 752 1328
WIRE 480 1376 480 1328
WIRE 544 1376 480 1376
WIRE 688 1376 608 1376
WIRE 816 1376 816 1328
WIRE 816 1376 752 1376
WIRE 544 1440 544 1424
WIRE 608 1440 608 1376
WIRE 608 1440 544 1440
WIRE 544 1456 544 1440
WIRE 752 1456 752 1424
WIRE 800 1456 752 1456
WIRE 752 1472 752 1456
WIRE 864 1520 752 1520
WIRE 864 1568 864 1520
WIRE 864 1568 752 1568
WIRE 544 1584 544 1536
WIRE 752 1584 752 1568
WIRE 1056 2064 1056 2032
WIRE 1056 2064 992 2064
WIRE 1264 2064 1264 2032
WIRE 1328 2064 1264 2064
WIRE 208 2112 208 2080
WIRE 208 2112 144 2112
WIRE 416 2112 416 2080
WIRE 480 2112 416 2112
WIRE 992 2112 992 2064
WIRE 1056 2112 992 2112
WIRE 1200 2112 1120 2112
WIRE 1328 2112 1328 2064
WIRE 1328 2112 1264 2112
WIRE 144 2160 144 2112
WIRE 208 2160 144 2160
WIRE 352 2160 272 2160
WIRE 480 2160 480 2112
WIRE 480 2160 416 2160
WIRE 1056 2176 1056 2160
WIRE 1120 2176 1120 2112
WIRE 1120 2176 1056 2176
WIRE 1056 2192 1056 2176
WIRE 1264 2192 1264 2160
WIRE 1312 2192 1264 2192
WIRE 1264 2208 1264 2192
WIRE 208 2224 208 2208
WIRE 272 2224 272 2160
WIRE 272 2224 208 2224
WIRE 208 2240 208 2224
WIRE 416 2240 416 2208
WIRE 464 2240 416 2240
WIRE 416 2256 416 2240
WIRE 1376 2256 1264 2256
WIRE 528 2304 416 2304
WIRE 1376 2304 1376 2256
WIRE 1376 2304 1264 2304
WIRE 928 2320 896 2320
WIRE 1056 2320 1056 2272
WIRE 1264 2320 1264 2304
WIRE 528 2352 528 2304
WIRE 528 2352 416 2352
WIRE 896 2352 896 2320
WIRE 64 2368 32 2368
WIRE 208 2368 208 2320
WIRE 416 2368 416 2352
WIRE 32 2400 32 2368
WIRE 896 2448 896 2432
WIRE 32 2496 32 2480
FLAG -112 176 0
FLAG -112 48 COM
FLAG 112 16 COM
FLAG 320 16 COM
FLAG 320 304 0
FLAG 112 304 0
FLAG -112 256 Vin
FLAG 256 240 Vin
FLAG -112 352 0
FLAG 592 16 COM
FLAG 800 16 COM
FLAG 800 304 0
FLAG 592 304 0
FLAG 736 240 Vin
FLAG -80 816 0
FLAG 64 784 0
FLAG 64 544 COM
FLAG 544 512 COM
FLAG 752 512 COM
FLAG 752 800 0
FLAG 544 800 0
FLAG 688 736 Vin
FLAG 544 1296 COM
FLAG 752 1296 COM
FLAG 752 1584 0
FLAG 544 1584 0
FLAG 688 1520 Vin
FLAG 208 2080 COM
FLAG 416 2080 COM
FLAG 416 2368 0
FLAG 208 2368 0
FLAG 352 2304 Vin1
FLAG 1056 2032 COM
FLAG 1264 2032 COM
FLAG 1264 2320 0
FLAG 1056 2320 0
FLAG 1200 2256 Vin2
FLAG 464 2240 Vout1
FLAG 1312 2192 Vout2
FLAG 32 2496 0
FLAG 64 2368 Vin1
FLAG 896 2448 0
FLAG 928 2320 Vin2
SYMBOL EE551\\PMOS4 176 96 M0
WINDOW 39 89 41 Left 2
SYMATTR SpiceLine L={L_M}
SYMATTR Value2 W={W_M}
SYMATTR InstName U1
SYMBOL EE551\\PMOS4 256 96 R0
WINDOW 39 75 41 Left 2
SYMATTR SpiceLine L={L_M}
SYMATTR Value2 W={W_M}
SYMATTR InstName U2
SYMBOL EE551\\NMOS4 256 240 R0
SYMATTR Value2 W={AbvW}
SYMATTR SpiceLine L={AbvL}
SYMATTR InstName U3
SYMBOL current 112 176 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName IbiasA
SYMATTR Value 112µ
SYMBOL voltage -112 64 R0
SYMATTR InstName Vdd
SYMATTR Value 3.3
SYMBOL voltage -112 240 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName Vin
SYMATTR Value 1
SYMBOL EE551\\PMOS4 656 96 M0
WINDOW 39 89 41 Left 2
SYMATTR SpiceLine L={L_M}
SYMATTR Value2 W={W_M}
SYMATTR InstName U4
SYMBOL EE551\\PMOS4 736 96 R0
WINDOW 39 75 41 Left 2
SYMATTR SpiceLine L={L_M}
SYMATTR Value2 W={W_M}
SYMATTR InstName U5
SYMBOL EE551\\NMOS4 736 240 R0
SYMATTR Value2 W={SubW}
SYMATTR SpiceLine L={SubL}
SYMATTR InstName U6
SYMBOL current 592 176 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName IbiasS
SYMATTR Value 1n
SYMBOL EE551\\NMOS4 0 720 R0
WINDOW 123 85 67 Left 2
WINDOW 39 88 93 Left 2
SYMATTR Value2 W=7u
SYMATTR SpiceLine L=2u
SYMATTR InstName U7
SYMBOL voltage -80 720 R0
SYMATTR InstName TestVin
SYMATTR Value 0
SYMBOL voltage 64 560 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName Id
SYMATTR Value 0
SYMBOL EE551\\PMOS4 608 592 M0
WINDOW 39 89 41 Left 2
SYMATTR SpiceLine L=10u
SYMATTR Value2 W=10u
SYMATTR InstName U8
SYMBOL EE551\\PMOS4 688 592 R0
WINDOW 39 75 41 Left 2
SYMATTR SpiceLine L=10u
SYMATTR Value2 W=10u
SYMATTR InstName U9
SYMBOL EE551\\NMOS4 688 736 R0
SYMATTR Value2 W=7u
SYMATTR SpiceLine L=2u
SYMATTR InstName U10
SYMBOL current 544 672 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName IbiasA1
SYMATTR Value {I_value}
SYMBOL EE551\\PMOS4 608 1376 M0
WINDOW 39 89 41 Left 2
SYMATTR SpiceLine L=10u
SYMATTR Value2 W=10u
SYMATTR InstName U14
SYMBOL EE551\\PMOS4 688 1376 R0
WINDOW 39 75 41 Left 2
SYMATTR SpiceLine L=10u
SYMATTR Value2 W=10u
SYMATTR InstName U15
SYMBOL EE551\\NMOS4 688 1520 R0
SYMATTR Value2 W=7u
SYMATTR SpiceLine L=4u
SYMATTR InstName U16
SYMBOL current 544 1456 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName IbiasA3
SYMATTR Value {I_value}
SYMBOL EE551\\PMOS4 272 2160 M0
WINDOW 39 89 41 Left 2
SYMATTR SpiceLine L=10u
SYMATTR Value2 W=10u
SYMATTR InstName U11
SYMBOL EE551\\PMOS4 352 2160 R0
WINDOW 39 75 41 Left 2
SYMATTR SpiceLine L=10u
SYMATTR Value2 W=10u
SYMATTR InstName U12
SYMBOL EE551\\NMOS4 352 2304 R0
SYMATTR Value2 W=7u
SYMATTR SpiceLine L=2u
SYMATTR InstName U13
SYMBOL current 208 2240 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName IbiasA2
SYMATTR Value 112µ
SYMBOL EE551\\PMOS4 1120 2112 M0
WINDOW 39 89 41 Left 2
SYMATTR SpiceLine L=10u
SYMATTR Value2 W=10u
SYMATTR InstName U17
SYMBOL EE551\\PMOS4 1200 2112 R0
WINDOW 39 75 41 Left 2
SYMATTR SpiceLine L=10u
SYMATTR Value2 W=10u
SYMATTR InstName U18
SYMBOL EE551\\NMOS4 1200 2256 R0
SYMATTR Value2 W=7u
SYMATTR SpiceLine L=4u
SYMATTR InstName U19
SYMBOL current 1056 2192 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName IbiasA4
SYMATTR Value 1n
SYMBOL voltage 32 2384 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value SINE(1.2222351 1m 100 0 0 0 5)
SYMBOL voltage 896 2336 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value SINE(267.89189m 100u 100 0 0 0 5)
TEXT 32 -32 Left 2 ;Above Threshold: Gain +- 5% of -50
TEXT 504 -32 Left 2 ;Subthreshold: Gain +- 5% of -300
TEXT 32 -88 Left 2 ;W >= 1um\nL  >= 1um
TEXT 24 -120 Left 2 !.param W_M=10u L_M=10u
TEXT 24 -144 Left 2 !.param AbvW=7u AbvL=2u
TEXT 24 -168 Left 2 !.param SubW=7u SubL=4u
TEXT -144 376 Left 2 ;.dc Vin 0 3.3 0.001
TEXT -96 864 Left 2 ;.dc TestVin 0 3.3 10m
TEXT -112 904 Left 2 ;Measure the sqrt(Id) vs Vg and you can find the slope and therefore the x-intercept\nthis is Vth and then measure Id vs Vg and when Vg = Vth you can find Id = Ith
TEXT -112 1008 Left 2 ;From these I got Vth = 0.398V
TEXT 88 1040 Left 2 ;Ith = 44.59nA
TEXT -112 1080 Left 2 ;This is only for when W = 7u and L = 2u
TEXT -112 1160 Left 2 ;Using the test sweeps and the threshold voltages I found\nunCox = k' = 44.6 uA/V^2
TEXT 872 536 Left 2 !.step param I_value list 0.1n 1n 10n 50n 100n 200n 300n 500n 1u 10u 100u 500u
TEXT 592 480 Left 2 ;Bias Current Sweep
TEXT 592 512 Left 2 ;Take derivative of output voltage sweep to find max gain point
TEXT 848 600 Left 2 ;Doing this sweep we can see the max gain never wuite reaches 300 so change length next
TEXT 928 1320 Left 2 ;Increasing length to 4um lets us get -300 now at 1n sweep with derivative function
TEXT -16 1920 Left 2 ;Transient Analysis
TEXT -24 2712 Left 2 ;Using d(V(n014) to find DC offset and amplitude of sin:\nMin: 1.2106575V\nMid: 1.2222351V\nMax: 1.2297697V
TEXT -104 1824 Left 2 ;-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
TEXT 872 2720 Left 2 ;Using d(V(n013) to find DC offset and amplitude of sin:\nMin: 261.92009mV\nMid: 267.89189mV\nMax: 275.18214mV
TEXT 248 1920 Left 2 !.tran 0.05
TEXT 184 2520 Left 2 !.meas TRAN Vin1_amp PP v(Vin1)\n.meas TRAN Vout1_amp PP v(Vout1)
TEXT 976 2496 Left 2 !.meas TRAN Vin2_amp PP v(Vin2)\n.meas TRAN Vout2_amp PP v(Vout2)
TEXT -8 2936 Left 2 ;0.00998425483704\n0.433623015881\n \nto\n \n0.00199449062347\n0.100430130959
TEXT 904 2936 Left 2 ;0.00199684500694\n0.574931979179\n \nto\n \n0.000199437141418\n0.05626475811
